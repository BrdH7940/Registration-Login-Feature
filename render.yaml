services:
    # Backend Service
    - type: web
      name: ia06-backend
      env: node
      plan: free
      region: oregon
      rootDir: backend
      buildCommand: npm ci && npm run build
      startCommand: npm run start:prod
      envVars:
          - key: NODE_ENV
            value: production
          - key: PORT
            value: 10000
          - key: MONGODB_CONNECTIONSTRING
            sync: false # REQUIRED: Set your MongoDB connection string in Render dashboard after first deploy
          - key: CONNECTIONSTRING
            sync: false # REQUIRED: Set same as MONGODB_CONNECTIONSTRING
          - key: FRONTEND_URL
            sync: false # Will be auto-filled after frontend deploys - see instructions

    # Frontend Service
    - type: web
      name: ia06-frontend
      env: static
      rootDir: frontend
      buildCommand: npm ci && npm run build
      staticPublishPath: dist
      pullRequestPreviewsEnabled: false
      envVars:
          - key: VITE_API_BASE_URL
            sync: false # Will be auto-filled with backend URL - see instructions

